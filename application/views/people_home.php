<div class="people_home" style="padding:0.7em;" boy_id="" file_id="">
	<div class="PH-label-g"><label>案件類別: </label><span id="PH-filetype">測試</span></div>
	<br />
	<div class="PH-label-g"><label>役男姓名: </label><span id="PH-name">陳宗儒</span></div>
	<div class="PH-label-g"><label>身份字號: </label><span id="PH-code">S133745083</span></div>
	<div class="PH-label-g"><label>役男生日: </label><span id="PH-birthday">1985-08-10</span></div>
	<br />
	<div class="PH-label-g"><label>入伍日期: </label><span id="PH-milidate">1050831</span></div>
	<div class="PH-label-g"><label>服役軍種: </label><span id="PH-type">陸軍</span></div>
	<div class="PH-label-g"><label>服役狀態: </label><span id="PH-status">服役中</span></div>
	<br />
	<div class="PH-label-g"><label>服役梯次: </label><span id="PH-echelon">000000</span></div>
	<div class="PH-label-g"><label>連絡電話: </label><span id="PH-phone">xx-xxxx-xxxx</span></div>
	<div class="PH-label-g" style="width: 30em;"><label>電子信箱: </label><span id="PH-email">xxxxxxxxx@xxxxx.xxxxx.xxxxxx</span></div>
	<div class="PH-label-2g"><label>戶籍地址: </label><span id="PH-fulladdress">臺中市西屯區逢福里惠來路三段198號4樓之1</span></div>
	
	<hr class="thin"/>
	<table border="1" style="text-align: center;">
		<tr>
		<td colspan="2" style="background-color: #ced790;">動產</td>
		<td colspan="4" style="background-color: #90c5d7;">不動產</td>
		<td colspan="3" style="background-color: #d79b90;">所得</td>
		<td style="background-color: #d490d7;">全戶</td>
		</tr>
		<tr>
		<td>存款</td>
		<td>投資</td>
		<td>房屋棟數</td>
		<td>房屋總價</td>
		<td>列計棟數</td>
		<td>列計價值</td>
		<td>薪資</td>
		<td>營利</td>
		<td>財產</td>
		<td>列計人口</td>
		</tr>
		<tr>
		<td>$<span id="PH-Deposits">1500000</span></td>
		<td>$<span id="PH-Investment">1500000</span></td>
		<td><span id="PH-Houses">3</span>棟</td>
		<td>$<span id="PH-Houses-total">2500000</span></td>
		<td><span id="PH-Houses-num">3</span>棟</td>
		<td>$<span id="PH-Houses-listtotal">2500000</span></td>
		<td>$<span id="PH-Salary">150000</span></td>
		<td>$<span id="PH-Profit">150000</span></td>
		<td>$<span id="PH-Property-int">150000</span></td>
		<td><span id="PH-members">5</span>人</td>
		</tr>
		<tr>
		<td>證券</td>
		<td>其他</td>
		<td>土地筆數</td>
		<td>土地總值</td>
		<td>列計筆數</td>
		<td>列計價值</td>
		<td>利息</td>
		<td>股利</td>
		<td>其他</td>
		<td>生活所需</td>
		</tr>
		<tr>
		<td>$<span id="PH-Securities">1500000</span></td>
		<td>$<span id="PH-others-Pro">1500000</span></td>
		<td><span id="PH-Land">3</span>筆</td>
		<td>$<span id="PH-Land-total">2500000</span></td>
		<td><span id="PH-Land-num">3</span>筆</td>
		<td>$<span id="PH-Land-listtotal">2500000</span></td>
		<td>$<span id="PH-Bank-int">150000</span></td>
		<td>$<span id="PH-Stock-int">150000</span></td>
		<td>$<span id="PH-others-int">150000</span></td>
		<td>$<span id="PH-need">350000</span></td>
		</tr>
		<tr>
		<td colspan="2">動產列計總額</td>
		<td colspan="4">不動產列計總額</td>
		<td colspan="3">全年所得總額</td>
		<td>扶助等級</td>
		</tr>
		<tr>
		<td colspan="2">$<span id="PH-total-pro">9000000</span></td>
		<td colspan="4">$<span id="PH-total-imm">9000000</span></td>
		<td colspan="3">$<span id="PH-total-inc">9000000</span></td>
		<td><span id="PH-level">甲</span></td></tr>
	</table>
	<hr class="thin"/>
	
	
	<!--<hr class="thin"/>-->
	<div style="width: 100%; display: inline-block;">
		<label style="width: 20em;"><h3>整體家況敘述-區公所</h3></label><button id="PH-file_comm_1_button">帶入自動家況</button>
		<textarea style="width: 100%;height: 10em;" id="PH-file_comm_1"></textarea>
	</div><div style="width: 100%; display: inline-block;">
		<label style="width: 20em;"><h3>整體家況敘述確認-市政府</h3></label><button id="PH-file_comm_2_button">帶入公所家況敘述</button>
		<textarea  style="width: 100%;height: 10em;"  id="PH-file_comm_2" disabled></textarea>
	</div>
	<br/>
	<hr class="thin"/>
	<div>
		<div class="upload_div">		
				<label>戶口名簿</label>
				<br/><a id="attach_0" class="attach-a" target="_blank"></a>
				<hr class="athin"/>				
				<input type="hidden" value="0"/>
				<input type="text" class="fake_input" placeholder="選擇檔案">
				<input type="file" name="attachment" class="transparent_input" />
				<p class="alert"></p>
				<button class="upload">上傳</button>
				<p class="msg" style="display: none;"></p>			
		</div>
		<div class="upload_div">			
				<label>所得</label>
				<br/><a id="attach_1" class="attach-a" target="_blank"></a>
				<hr class="athin"/>
				<input type="hidden" value="1"/>
				<input type="text" class="fake_input" placeholder="選擇檔案">
				<input type="file" name="attachment" class="transparent_input" />
				<p class="alert"></p>
				<button class="upload">上傳</button>
				<p class="msg" style="display: none;"></p>
		</div>
		<div class="upload_div">	
				<label>財產</label>
				<br/><a id="attach_2" class="attach-a" target="_blank"></a>
				<hr class="athin"/>
				<input type="hidden" value="2"/>
				<input type="text" class="fake_input" placeholder="選擇檔案">
				<input type="file" name="attachment" class="transparent_input" />
				<p class="alert"></p>
				<button class="upload">上傳</button>			
				<p class="msg" style="display: none;"></p>
		</div>
		<div class="upload_div">			
				<label style="width: 8em;">學生證/醫療證明</label>
				<br/><a id="attach_3" class="attach-a" target="_blank"></a>
				<hr class="athin"/>
				<input type="hidden" value="3"/>
				<input type="text" class="fake_input" placeholder="選擇檔案">
				<input type="file" name="attachment" class="transparent_input" />
				<p class="alert"></p>
				<button class="upload">上傳</button>
				<p class="msg" style="display: none;"></p>
		</div>
		<div class="upload_div">			
				<label>照片或其他</label>
				<br/><a id="attach_4" class="attach-a" target="_blank"></a>
				<hr class="athin"/>
				<input type="hidden" value="4"/>
				<input type="text" class="fake_input" placeholder="選擇檔案">
				<input type="file" name="attachment" class="transparent_input" />			
				<p class="alert"></p>
				<button class="upload">上傳</button>
				<p class="msg" style="display: none;"></p>
		</div>
	</div>
</div>
<div>
	
</div>

<script>

	$('input[type=file]').on('change', function(e){
		$(this).parent().children('.fake_input').val($(this).val());
		var file = e.currentTarget.files[0];
		if (file.size > 4194304){ //max file size is 4 MB = 4096 KB = 4194304 Bytes
			$(this).next('.alert').html('檔案必須小於4MB');
			// $(this).siblings('button').fadeOut('slow');
			$(this).siblings('button').prop('disabled', true);		
		}else{
			$(this).next('.alert').html('');
			// $(this).siblings('button').fadeIn('slow');		
			$(this).siblings('button').prop('disabled', false);		
		}
	});

    $('.upload').on('click', function () {
        // var file_data = $('#file').prop('files')[0];
        var file_data = $(this).siblings('input[type=file]').prop('files')[0];
        var file_id = $('.people_home').attr('file_id'); //案件編號
        var file_category = $(this).siblings('input[type=hidden]').val();
        var form_data = new FormData();
        var msg = $(this).siblings('.msg').get(0);
        var hyper_link = $(this).siblings('.attach-a').eq(0);
        var fake_input = $(this).siblings('.fake_input').eq(0);

        form_data.append('attachment', file_data);
        form_data.append('file_id', file_id);
        form_data.append('category', file_category);

        $.ajax({
            url: '/index.php/attachment/upload', // point to server-side controller method
            dataType: 'text', // what to expect back from the server
            cache: false,
            contentType: false,
            processData: false,
            data: form_data,
            type: 'post',
            success: function (response) {
                $(msg).html(response); // display success response from the server
                $(msg).show();
                $("#edit-home").scrollTop(10000);
                var strs = response.split('<br>新檔名: ');
                var newfile = strs[1];
                console.log(newfile);
                $(hyper_link).text(newfile);
                $(hyper_link).attr('href', '/uploads/'+newfile);
                $(fake_input).val("");

                setTimeout(function(){
                    $(msg).fadeOut('2000');
            	},1500);

            },
            error: function (response) {
                $(msg).html(response); // display error response from the server
            }
        });
    });
</script>
